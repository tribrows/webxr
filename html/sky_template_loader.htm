<script type="module">
    import * as THREE from 'three';
    import { createSky, createCloudMaterial, setupGUI } from './SceneComponents.js';

    const config = {
        skyTop: '#5e8bff',
        skyBottom: '#ff98a6',
        cloudHighlight: '#ffffff',
        cloudMidtone: '#c5d1e8',
        cloudShadow: '#7a869e',
        ambientIntensity: 0.6
    };

    // Standard Setup
    const scene = new THREE.Scene();
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
    camera.position.set(0, 30, 100);

    // Add Lights
    const ambientLight = new THREE.AmbientLight(0xffffff, config.ambientIntensity);
    const lightTop = new THREE.DirectionalLight(config.skyTop, 2);
    lightTop.position.set(50, 200, 50);
    scene.add(ambientLight, lightTop);

    // Initialize Templates
    const sky = createSky(config);
    const cloudMat = createCloudMaterial(config, lightTop.position);
    scene.add(sky);

    // Initialize GUI from Shared Component
    // Pass the objects that the GUI needs to control
    setupGUI(config, { sky, cloudMat, lightTop, ambientLight });

    function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
    }
    animate();
</script>
